\documentclass{article}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{bookmark}
% \usepackage{fbb}
% \usepackage{newpx}
% \usepackage{libertine}
% \usepackage{crimson}
% \usepackage{bm}
\usepackage{cochineal}
\usepackage[a4paper, margin=1in]{geometry}

% \usepackage{eulervm} % math
\usepackage{mathpazo} % math

\usepackage{tikz-cd}
\usepackage{enumerate}

\newtheorem{theorem}{Theorem}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{proposition}[theorem]{Proposition}
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=cyan,
    citecolor=red
}

\begin{document}

\title{Lang's Algebra Chapter 3 Solutions}
\author{Amanuel Tewodros}
\maketitle

% \tableofcontents

% commands

\newcommand{\size}[1]{|#1|}
\newcommand{\idx}[2]{[#1 : #2]}
\newcommand{\gen}[1]{\langle #1 \rangle}
\newcommand{\set}[1]{\{#1\}}
\newcommand{\normal}{\trianglelefteq}
\newcommand{\subgroup}{\leq}
\newcommand{\normalizer}[1]{\text{N}_{#1}}
\newcommand{\centerizer}{Z}
\newcommand{\aut}{\text{Aut}}
\newcommand{\inn}{\text{Inn}}
\newcommand{\syl}{\text{Syl}}
\newcommand{\sym}{\text{Sym}}
\newcommand{\alt}{\text{Alt}}
\newcommand{\id}{\text{id}}
\newcommand{\im}{\text{im}}
\newcommand{\orbit}[1]{\mathcal{O}_{#1}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\C}[1]{\mathbb{Z}/#1\mathbb{Z}}
\newcommand{\iso}{\cong}
\newcommand{\dihedral}[1]{D_{#1}}
\newcommand{\dicyc}{\text{DiC}}
\newcommand{\hol}{\text{Hol}}
\newcommand{\I}[1]{\mathfrak{#1}} 
\newcommand{\Map}{\mathrm{Map}}
\newcommand{\nequiv}{\not \equiv}
\newcommand{\cat}[1]{\mathcal{#1}}
\newcommand{\Cat}{\mathcal{C}}
\newcommand{\Mor}{\text{Mor}}
\newcommand{\Ob}{\text{Ob}}
\newcommand{\End}{\text{End}}
\newcommand{\horline}{\noindent\rule{\textwidth}{1pt} \newline}
\newcommand{\Img}{\mathrm{Im}\ }
\newcommand{\Hom}{\mathrm{Hom}}
\newcommand{\fto}[1]{\overset{#1}{\to}}
\newcommand{\from}{\leftarrow}
\newcommand{\m}[1]{\mathfrak{#1}}
\newcommand{\dual}[1]{#1^{\vee}}
\newcommand{\ddual}[1]{#1^{\vee \vee}}
\newcommand{\rank}{\mathrm{rank}}
\newcommand{\tor}[1]{#1_{\mathrm{tor}}}
\newcommand{\dirlim}{\underrightarrow{\lim}}
\newcommand{\localize}[2]{{#1}^{-1}#2}
% \newcommand{\rank}[1]{def}

\begin{enumerate}[(1)]
	\item By the second isomorphism theorem,  we have 
    $$\dfrac{U}{U \cap W} \iso \dfrac{U + W}{W}.$$
    For two vector spaces, $X \supseteqq Y$ over a field $K$, we have $\dim X/Y = \dim X - \dim Y$. Thus $\dim U - \dim U \cap W = \dim U + W  - \dim W.$

    \item Let $M$ be a module over a commutative ring $R$. Let $I$ be a maximal ideal of $R$. We first show that for any proper ideal $\I a$ of $R$ and basis set $\set{x_1, x_2, \dots},$ of $M$,
    \begin{lemma}
        $$\frac{M}{\I aM} \iso \bigoplus_{i}\frac{A}{\I a}(x_i + \I ax_i).$$
    \end{lemma}
    \begin{proof}
        $\I aM$ is submodule of $M$ because $\I a M \subseteqq M$ by $R$-closure property of $\I a.$ It immedietly follows that $\I aM = \bigoplus_i \I a x_i.$ By linear independence of $x_i$, $\big(\sum_i r_ix_i\big) \mod \I ax_j = (r_j \mod \I a)x_j + \sum_{i \neq j} r_ix_i.$ Therefore, $M/\I a M = \bigoplus_i Ax_i/\I ax_i.$ By the isomorphism $x_i \mapsto 1_A \mapsto (x_i + \I  ax_i)$,  $Ax_i/\I ax_i \iso A/\I a \iso A/\I a ( x_i + \I ax_i).$
    \end{proof}

    Taking $\I a$ as a maximal ideal of $R$ in the above lemma, we see that $M/\I aM$ is a direct product of vector spaces over the field $A/\I a$ and thus admit a basis of the same cardinality  as that of $M$. Because the dimension of a vector space is independent of the basis choice, $M$ also has a fixed dimension.

    \item Let $\set{x_1, \dots, x_m}$ form the basis set of $R$ over $k$ and let $1_R = k_1x_1 + \dots k_mx_m$ for $k_i \in k.$ For any element $a \in R$, define the sequences $\set{y_1, \dots, y_m} \subseteqq k$, $\set{f_1, f_2, \dots, f_m} \subseteqq R$ as: 
        $$f_1 = a, \quad y_1 = w_{1,1}^{-1}k_1 $$
        $$f_{i+1} = f_iy_i - k_ix_i, \quad  y_{i} = k_iw_{i, i}^{-1},$$

    ,where $f_i = \sum_j w_{i, j}x_j.$ By construction, $a^{-1} = \sum_i y_ix_i.$ Thus $R$ is a field.

   
    \item  \textbf{Direct Sums}
    \begin{enumerate}[(a)]
        \item  First, we show the equivalence of the two statements of the theorem. Suppose there is $\varphi$ such that $g \circ \varphi = \id.$ By the injectivness of the composition,  $\Img \varphi \cap \ker g  = \set{0}.$ But by exactness, $\ker g = \Img f$. We can unambiguously define $\psi(u)$ to be the inverse image of $f^{-1}(u')$ where $u' \equiv u \mod \Img \varphi$ and $u' = f(x)$ for some $x \in M'$ because if $f(x) = f(y) \mod \Img \varphi$, $f(x - y) \in \Img \varphi$ and by injectivity of $f$, $x = y$.Since $M/\Img f \iso M'' =  \Img \varphi, \psi$ is defined in all of $M$. Similarly, if the second statement is true, $\ker \psi \cap \Img f = \set{0}$ because $\psi\circ f$ is injective. By exactness, $\Img f = \ker g$. We can then define $\varphi(u) = u'$ where $u' = y \mod \ker \psi$ and $g(y) = u$ for some $y$. $\varphi$ is well-defined because if $g(y_1) = g(y_2)$ for $y_1 \neq y_2$, then $y_1 \neq y_2 \mod \ker \varphi$.\\
        
        Now suppose $x \in M$. $x - \varphi(u) \in \Img f$ for exactly one $u$ by the argument mentioned previously. Thus we can express $x = r + s$ where $r = \varphi(u) \in \Img \varphi$ and $s = x - \varphi(u) \in \Img f$. This implies $M = \Img f \oplus \Img \varphi$. By bijectivness of $g \circ \varphi$, $\Img \varphi \iso M''$. By contrast, if $M = \Img f \oplus N$ for some $N$, with isomorphism $t: N \to M''.$ We can define $g: M \to M''$ as $g(u) = u'$ such that there is $u = y \mod N$ and $t^{-1}(u') = y$. This definition is unambiguous because $N \cap \Img f = \set{0}$. Since $g \circ t^{-1} = \id$, the sequence splits.\\



        Finally, we complete the details of proposition 3.2. We have just shown $M = \Img f \circ \Img \varphi.$ By exactness, $\Img f = \ker g$. Also, $\Img f \iso M'$ and $\Img \varphi \iso M''$ by injectivness of $f$ and $\varphi$ resp. This proves $M \iso M' \oplus M''.$ We can write $x \in M$ as $f(u) + x - f(u)$ where $x - f(u) \in \ker \psi$. $u$ is then uniquely determined by $x$ as $\ker \psi \cap \Img f = \set{0}$ by bijectivness of $\psi \circ f.$ This shows $M = \Img f \oplus \ker \psi.$

        \renewcommand{\phi}{\varphi}
        \item First, we note that $\phi_i$ is injective because othewise the composition $\psi_i \circ \phi_i$ wouldn't be injectice, a contradiction. This implies, for every valid $i$, there is a submodule $E'_i = \Img \phi_i$ of $E$ that is isomorphic to $E_i.$ Moreover, if $c \in \Img \phi_i \cap \Img \phi_j$ for $i\neq j$, then $\psi_i(c) = \psi_j(c) = 0$, forcing $c$ to be $0$. These statements prove
        
        $$\bigoplus_{i=1}^n E'_i \subseteqq E.$$
        The inverse inclusion follows as follows. Let $x \in E$, then $x = \sum_{i=1}^n \phi_i(\psi_i(x))$, but $\phi_i(\psi_i(x)) \in E_i'$. Therefore $x \in \bigoplus_i E_i'.$

        Let $x = x_1 +\cdots + x_m$ where $x_i \in E_i'$. The map definied by $x \mapsto (\psi x_i)_{1 \leq i \leq m}$ is therefore an isomorphism and the inverse map is given by $(\psi x_i)_i \mapsto \sum_i x_i.$
    \end{enumerate}
\item  Let $v_m' = a_1v_1 + \cdots + a_{m}v_{m}$. Since $a_m \neq 0$, $v_m'$, and by the assumption that $\set{v_i}$ is linearly independent over $\mathbb{R}$, the set $\set{v_1, \dots, v_{m-1}, v'_{m}}$ is linearly indepenedent over $\ZZ$. We also note that, $v_m' -  \sum_{i = 1}^{m-1} a_iv_i \in A$, thus we can safely assume $a_1 = \cdots = a_{m-1}= 0.$

To show, the set spans $A$, we consider  $A/A_0.$  Suppose, there is $av_m \in A/A_0$ such that $av_m \neq  nv'_m$ for all $ n \in \ZZ$. Let $r, s$ be two integers such that $|ra_m + sa| < a_m$.  Since contradicts minimality of $a_m$, it must be the case that $a_m \mid a.$. Therfore $A/A_0 = \ZZ v'_m.$ 

  \newcommand{\zmono}[1]{\ZZ\gen{#1}}
  \item We induct on the size of $S.$

        First assume that $S = \set{ w }$. Then $\zmono{S} = \set{n[w] : n \in \ZZ}$. If $M$ is a subgroup of $\zmono{S}$, then $M = \zmono{a[w]}$ for some $a \in \ZZ$. Here we pick $y_w = a[w]$ which is $G$-linear.

        For the induction step, suppose the statement is true for $S$, $0 \leq |S| \leq m - 1.$ We shall prove the statement is true for $S$ with $m$ elements. Fix on element $w \in S$, and consider projection map $\pi: \zmono S \to \zmono{G \cdot w}$. By correspondence, $\pi(M)$ is a subgroup of $\zmono{G \cdot w}$ with basis $\set{\bar y_{gw}}_{w \in G}$  which satisfy the property for $\sigma \in G$, $\sigma \bar y_{gw} = \bar y_{\sigma g w}$. We then lift the basis of $\zmono{\pi(M)}$ to $\zmono{S}$ by picking a representatives $\I R = \set{y_w}$ in $M$ for $\bar y_w$. The $y_w$ are linearly indepndenent thus form part of the basis for $M$. Again by hypothesis, $M \cap \zmono{S - G\cdot w}$ has basis $\I B = \set{y_w}_{w \in S - G \cdot w}$ that satisfy the given property. We finally combine $\I R$ and $\I B$ to get the basis of rank $m$ for $M$.

  \item
        For convenience, we identify the properties of a semi-norm as follows
        \begin{enumerate}[SN-1]
          \item $|v| \geq 0$ \label{sn1}
          \item $|nv| = |n||v|$ \label{sn2}
          \item $|u + v| \leq |u| + |v|$ \label{sn3}
        \end{enumerate}


        \begin{enumerate}[(a)]
          \item Let $a, b \in M_0$.  Then by SN-2 and SN-3, $|u - b| \leq |a| + |b| = 0$. By SN-1, we have $|a - b| \geq 0$, this $a - b \in M_0$. By SN-2, $|0| = |2 \cdot 0| = 2|0|.$ This implies $0 \in M_0.$ Hence $M_0$ is a subgroup of $M$.

          \item If $M_0 \neq \set 0$,  we can make the transformation $x \mapsto x + M_0$ without loss of generality as such map preserves the linear independence of $\set{v_i}$. Thus, we can assume $M_0 = \set 0.$

          Let $N = \gen{v_1, \dots, v_r}$. Since $M$ has rank $r$, the exponent $e$ of $M/N$ is finite and thus $eM$ is a subgroup of $N$. Moreover, $N/eM$ is torsion group with finite number of elements. Therefore, we can pick the smallest positive integers $n_{i, j}$ such that
                $$\sum_{j = 1}^i n_{i, j}v_j = dw_i \quad \text{for some }  w_i \in M$$

                The linear independence follows immediately. Picking $n_{j, k}$ in the range $[0, d - 1]$,
                $$d |w_i| = |dw_i| \leq \sum_{j = 1}^i n_{i, j}|v_j| \leq d\sum_{j = 1}^i |v_j| .$$
        \end{enumerate}

  \item
        \begin{enumerate}[(a)]
          \item SN-1 follows immediately because $\log \geq 0$ for all $\ZZ^+$. Since, $h(x^{-1}) = h(x)$, it suffices to prove SN-2 for $n \geq 0$ in which case  $h(x^n) = \log \max(|a^n|, |b^n|) = \log \max(|a|, |b|)^n = n \log \max(|a|, |b|) = nh(x)$. Finally, if $y = c/d$,  $h(xy) = h(ac/bd)$. Let $e = \gcd(a, d)$ and $f = \gcd(c, b).$  Then
                %$$h(xy) = = $

                \begin{eqnarray*}
                  h(xy) & = & \log \max(|\frac{ac}{ef}|, |\frac{bd}{ef}|) \\
                  & = & \log \big(\frac{1}{|ef|}(\max(|ac|, |bd|))\big) \\
                  & = & \log \max(|ac|,  |bd|) - \log |ef| \\
                        & \leq &  \log \max(|ac|, |bd|) \\
                  & \leq & \log \max(|a|, |b|) + \log \max(|c|, |d|)
                \end{eqnarray*}

        \newcommand{\QQ}{\mathbb{Q}}
            Hence SN-3 is satisfied. $\log \max(|a|, |b|) = 0$ if and only if $|a| = |b| = 1$, which makes the kernel of $\ker h = \set{\pm 1}$.
          \item  For a given rational number $x = a/b$, since there are finitely many prime divisors of $p, q$ such that $p | a$ and $q | b$, $M$ can be generated by the set $\set{-1, 1} \cup \set{p, 1/q \in \QQ^* : p | \text{the numerator of } x_1 \cdots x_m, q | \text{the denominator of } x_1 \cdots x_m }$. From this we can set upper bound on the norm as
                $$h(y) \leq \sum_{p} \log p$$
          where the sum is over all primes $p$ (not necassarily distinct) that divides the numerator or denominator of $x_i$ for some $i$.
       \end{enumerate}
  \item
        \begin{enumerate}[(a)]
          \item $\localize{S}{M}$ can be defined as a subset of $M \times S$  for a commutative ring $A$, a multiplicative subset $S$ and $A$-module $M$ such that
                $$(m_1, s_1) \sim (m_2, s_2)$$,
                if there is a an element $s \in S$ that satisfy the equation $s(s_2m_1 - s_1m_2) = 0$. As with $\localize{S}{A}$, we can denote $(m, s)$ with $m/s.$
                Since $\localize SA$ is a commutative ring, we can define the action of $\localize SA$ on $\localize SM$ as
                $$\frac{a}{s'}\cdot \frac{m}s = \frac{a \cdot m}{s' s}.$$

                With this definition of the action of $\localize SA$  on $\localize SM$, we can show that $\localize SM$ is an $\localize SA$-module. Let $a_1/b_1, a_2/b_2 \in \localize SA$ and let $m_1/s_1, m_2/s_2 \in \localize SM$. Then we have
                \begin{eqnarray*}
                  \frac{a_1}{b_1} \cdot \bigg( \frac{m_1}{s_1} + \frac{m_2}{s_2}  \bigg) & = &  \frac{a_1}{b_1} \cdot \bigg( \frac{m_1s_2 + m_2s_1}{s_1s_2} \bigg)\\
                                                                                          & = & \frac{a_1b_1}{b_1b_1} \cdot \bigg(\frac {m_1s_2 + m_2s_1}{s_1s_2} \bigg) \\
                                                                                          & = &  \frac{a_1b_1s_2m_1 + a_1b_1s_1m_2}{b_1s_1b_1s_2} \\
                                                                                          & = &  \frac{a_1m_1}{b_1s_1} + \frac{a_1m_1}{b_1s_2} \\
                                                                                          & = &  \frac{a_1}{b_1}\cdot \frac{m_1}{s_1} + \frac{a_1}{b_1}\cdot \frac{m_2}{s_2}.  \\
                \end{eqnarray*}

                and

                \begin{eqnarray*}
                  \bigg( \frac{a_1}{b_1} + \frac{a_2}{b_2} \bigg) \cdot \frac{m_1}{s_1}  & = &  \bigg( \frac{a_1b_2 + a_2b_1}{b_1b_2} \bigg) \cdot  \frac{m_1}{s_1} \\
                                                                                          & = &  \bigg(\frac {a_1b_2 + a_2b_1}{a_1a_2} \bigg) \cdot \frac{m_1s_1}{s_1s_1}  \\
                                                                                          & = &  \frac{a_1b_2m_1s_1 + a_2b_1m_1s_1}{s_1b_1s_2b_2} \\
                                                                                          & = &  \frac{a_1m_1}{b_1s_1} + \frac{a_2m_1}{b_2s_1} \\
                                                                                          & = &  \frac{a_1}{b_1}\cdot \frac{m_1}{s_1} + \frac{a_2}{b_2}\cdot \frac{m_1}{s_1}.  \\
                \end{eqnarray*}

          \item Let

                $$0 \to M' \fto{f} M \fto{f''} M'' \to 0$$
                be exact. Then we have the induced sequence,
                $$0 \to \localize SM' \fto{g} \localize SM \fto{g''} \localize SM'' \to 0, $$
                where $g$ is defined as $g(m/s) = f(m)/s$ and $g''$ is defined as $g''(m/s) = f''(m)/s.$ $\ker g  = \set{m/s : f(m)/s = 0}.$ Since $f$ is injective, $f(m) = 0$ iff $m = 0$,i.e., $\ker g = \set{0}.$

                By exactness $\Img f  = \ker f''.$ Evaluating $g''$ on $\Img g$,  $g''(g(m/s)) = g''(f(m)/s) = f''(f(m))/s = 0/s =0$. This shows $\Img g \subseteqq \ker g''.$ Let $g''(x/s) = f''(x)/s  = 0.$ This implies $f''(x) = 0$ for some $x$. By exactness, $\ker f \subseteqq \Img f''$, implying $x = f(y)$ for some $y \in M'.$ This proves $\Img g \supseteqq \ker g''.$

                Finally, let $x/s \in \localize SM''.$ Since $x \in M''$, $x = f''(y)$ for some $y \in M$ by exactness of the first sequence. But then $x/s = f''(y)/s = g''(y/s)$ making $g''$ surjective.
        \end{enumerate}

        \item
        \begin{enumerate}[(a)]
          \item The natural map under consideration is the map
                $$f =  x \mapsto \big(x/1, \dots \big).$$

                \newcommand{\Ann}{\mathrm{Ann}}
                If $x/s' \sim 0/1$, for some $s' \in A -\I p$ and $x \in M$,  then it means $sx = 0$ for some $s \in A - \I p.$ Therefore, the kernel of $f$ is the set $\set{x : sx = 0, \text{for some }s \in A - \I p \text{ for all maximal ideals } \I p}.$ If $x \in \ker f$, then $\Ann(x)$ is not contained in any maximal ideal $\I p$, implying $\Ann(x) = A \implies x = 0$.



                \newcommand{\p}{\I p}
                \newcommand{\h}[1]{\hat{#1}}
          \item Let $f: M'' \to M$ and $\h f: M''_\p \to M_\p$. Define $g$ and $\h g$ similarly for the second halves of the sequences.

                \begin{itemize}
                  \item[($\implies$)] This directly follows from part (b) of exercise 9.
                  \item[($\impliedby$)] Suppose $0 \to M'_p \to M_\p \to M''_\p$ is exact sequence for all primes $\p$.

                        Let $f(x) = 0$, then  $\h f(x/s) = f(x)/s = 0/1$ for all $s \in \p$. By exactness, $\h f$ is injective. thus $x/s = 0$. By similar reasoning as part (a) of this problem $x = 0$. Hence $f$ is injective.

                        Now let $gf(x) = n$. By definition, $\h g \h f(x/s) = n/s$. By exactness, the left-hand side is $0$. Thus $s'n = 0$ for $s' \in \p$ for all prime $\p$. Again, by similar reasoning as part (a), $n$ has to be $0$ and $\Img f \subseteqq \ker g$. To see the converse, suppose $g(y) = 0$. Consequently, $\h g(y/s) =  g(y)/s = 0$ for all $s \in \p$ and  by exactness,  $y/1 = \h f(x/t_\p) = f(x)/t_\p$ for some $t_\p$ depending on $\p$. This implies $s_\p(f(x) - t_\p y) = 0$ or equivalently $f(s_\p x) = r_\p y$ for some $x \in M'_\p$ and $r_\p = s_\p t_\p$ implying $r_\p y \in \Img f$ for all prime $\p$. Since $M/\Img f$ is also an $A$-module, it implies $r_\p(x + \Img f) = 0$ for all $\p$ implying $x + \Img f = 0 + \Img f$ or in other words, $x \in \Img f$. This proves $\Img f  = \ker g.$

                        Finally, suppose $y \in M''$. By surjectivity of $\h g$, $y/1 = \h g(x/s) = g(x)/s$ for some $x \in M$. By definition, $s_\p(g(x) - t_\p y) = 0.$ By similar argument as above, $y \in \Img g$, proving the exactness of the first sequence.

                \end{itemize}

                \item Let $\phi: M \to M_\p$ be the natural map in question. Then $\phi(x) = x/1$. If $\phi(x) = 0$, then $sx = 0$ for some $s \in A - \p$. This contradicts the assumption $M$ is torsion-free and since $0 \notin A - \p$, $x = 0$.
        \end{enumerate}

        \newcommand{\ip}{\I p}
        \newcommand{\io}{\I o}
        \textbf{Projective modules over Dedekind rings}
  \item
            Let $\mathfrak{o}$ be a Dedekind domain, and let $M$ be a finitely generated torsion-free $\mathfrak{o}$-module.
            For each prime ideal $\mathfrak{p}$, consider the localization $\mathfrak{o}_{\mathfrak{p}}$ and the localized module $M_{\mathfrak{p}}$.

            Since $\mathfrak{o}_{\mathfrak{p}}$ is a Dedekind domain with only one prime ideal $S^{-1}\mathfrak{p}$, by the result from the previous chapter it is a PID.
            Finite generation and torsion-freeness of $M_{\mathfrak{p}}$ follow from the corresponding properties of $M$, and Theorem~7.3 then implies that $M_{\mathfrak{p}}$ is a free $\mathfrak{o}_{\mathfrak{p}}$-module (and hence projective).

            Now let $F$ be a free $\mathfrak{o}$-module, and suppose there is a surjective homomorphism
            \[
            f: F \twoheadrightarrow M.
            \]
            Localizing at $\mathfrak{p}$, we obtain a surjective map
            \[
            f_{\mathfrak{p}}: F_{\mathfrak{p}} \twoheadrightarrow M_{\mathfrak{p}}.
            \]
            Since $M_{\mathfrak{p}}$ is projective, there exists a homomorphism
            \[
            g_{\mathfrak{p}}: M_{\mathfrak{p}} \to F_{\mathfrak{p}}
            \]
            such that
            \[
            f_{\mathfrak{p}} \circ g_{\mathfrak{p}} = \mathrm{id}_{M_{\mathfrak{p}}}.
            \]

            Because $M$ is finitely generated, say by $m_1,\dots,m_r$, each $g_{\mathfrak{p}}(m_i/1) \in F_{\mathfrak{p}}$ can be written with a denominator not in $\mathfrak{p}$.
            Let $c_{\mathfrak{p}} \in \mathfrak{o} \setminus \mathfrak{p}$ be the product of all these denominators for $i=1,\dots,r$.
            Then
            \[
            c_{\mathfrak{p}}\, g_{\mathfrak{p}}\big(l_{\mathfrak{p}}(M)\big) \subseteq F,
            \]
            where $l_{\mathfrak{p}}: M \to M_{\mathfrak{p}}$ is the localization map.

            We claim that the set $\{c_{\mathfrak{p}} : \mathfrak{p} \ \text{prime}\}$ generates the unit ideal $(1)$.
            Indeed, if this ideal were proper, it would be contained in some maximal ideal $\mathfrak{m}$; but then $c_{\mathfrak{m}} \in \mathfrak{m}$, contradicting $c_{\mathfrak{m}} \notin \mathfrak{m}$.
            Thus there exist primes $\mathfrak{p}_1, \dots, \mathfrak{p}_n$ and elements $x_1,\dots,x_n \in \mathfrak{o}$ such that
            \[
            \sum_{i=1}^n x_i\, c_{\mathfrak{p}_i} = 1.
            \]

            Define
            \[
            g := \sum_{i=1}^n x_i\, c_{\mathfrak{p}_i} \cdot g_{\mathfrak{p}_i} \circ l_{\mathfrak{p}_i} : M \to F.
            \]
            This is well-defined since each $c_{\mathfrak{p}_i} g_{\mathfrak{p}_i}(l_{\mathfrak{p}_i}(M)) \subseteq F$.

            For $m \in M$, we have
            \[
            f(g(m))
            = \sum_{i=1}^n x_i\, c_{\mathfrak{p}_i} \, f(g_{\mathfrak{p}_i}(m/1))
            = \sum_{i=1}^n x_i\, c_{\mathfrak{p}_i} \, (m/1)
            = \left(\sum_{i=1}^n x_i\, c_{\mathfrak{p}_i}\right) m
            = 1 \cdot m
            = m.
            \]
        Thus $f \circ g = \mathrm{id}_M$, showing that $M$ is a direct summand of $F$ and hence projective.


  \item

        \newcommand{\ia}{\I a}
        \newcommand{\ib}{\I b}
        \newcommand{\ic}{\I c}
        \begin{enumerate}[(a)]
          \item Define a map $\ia \oplus \ib \to \io$ as

                $$ (a, b) \mapsto ca + b,$$

                where $c$ is as defined in question 19 of chapter II. Since $c\ia$ and $\ib$ are coprime the image of this map is $\io$. The kernel of this map which is given by $c\ia \cap \ib \supseteq c\ia\ib$ also satisfies the reverse inclustion because for $d \in c\ia \cap \ib$, we can write $d = d(ca + b) = ca\cdot d + d\cdot a \in c\ia \ib$. Therefore, kernel is $c\ia \ib.$ Since the map $\ia ib \to c\ia\ib$ is bijective, and $\io$ is fintely generated and torsion-free (thus free), it follows that

                $$\ia \oplus \ib \iso \io \oplus \ia \ib$$

          \item

        \end{enumerate}


\end{enumerate}

\end{document}
